<h2 mat-dialog-title>
  {{ data.vehicle ? "Editar Vehículo" : "Agregar Vehículo" }}
</h2>

<form [formGroup]="vehicleForm" (ngSubmit)="save()" mat-dialog-content>
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Placa</mat-label>
    <input matInput formControlName="plateNumber" required />
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Tipo</mat-label>
    <mat-select formControlName="type" required>
      <mat-option *ngFor="let type of vehicleTypes" [value]="type">
        {{ type }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Combustible</mat-label>
    <mat-select formControlName="fuelType" required>
      <mat-option *ngFor="let fuel of fuelTypes" [value]="fuel">
        {{ fuel }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Eficiencia (km/l)</mat-label>
    <input type="number" matInput formControlName="fuelEfficiency" required />
  </mat-form-field>

  <!-- ✅ NUEVO CAMPO: Eficiencia Promedio -->
  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Eficiencia Promedio (km/l)</mat-label>
    <input
      type="number"
      matInput
      formControlName="averageFuelEfficiency"
      required
    />
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Marca</mat-label>
    <input matInput formControlName="brand" required />
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Modelo</mat-label>
    <input matInput formControlName="model" required />
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Fecha de Adquisición</mat-label>
    <input
      matInput
      [matDatepicker]="picker"
      formControlName="acquisitionDate"
      required
    />
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Precio de Compra</mat-label>
    <input type="number" matInput formControlName="purchasePrice" required />
  </mat-form-field>

  <mat-form-field appearance="fill" class="full-width">
    <mat-label>Número de Documento</mat-label>
    <input matInput formControlName="documentNumber" required />
  </mat-form-field>

  <mat-checkbox formControlName="isUnderMaintenance">
    En Mantenimiento
  </mat-checkbox>
</form>

<mat-dialog-actions align="end">
  <button mat-button (click)="cancel()">Cancelar</button>
  <button
    mat-raised-button
    color="primary"
    [disabled]="!vehicleForm.valid"
    (click)="save()"
  >
    Guardar
  </button>
</mat-dialog-actions>
